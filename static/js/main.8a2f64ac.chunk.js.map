{"version":3,"sources":["components/AppHeader/AppHeader.js","context/LocationsContext.js","containers/AutoCompleteInput/AutoCompleteInput.js","components/FormGroup/FormGroup.js","components/Message/Message.js","components/LeftPanel/LeftPanel.js","config/utilities.js","components/RightPanel/RightPanel.js","config/constants.js","config/endpoints.js","axios/AxiosLauncher.js","containers/AppBody/AppBody.js","components/AppFooter/AppFooter.js","App.js","serviceWorker.js","index.js"],"names":["AppHeader","react_default","a","createElement","LocationsContext","React","createContext","mapLoaded","updateLocation","AutoCompleteInput","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handlePlaceChanged","place","autocomplete","getPlace","context","inputId","geometry","location","setState","isDirty","resetField","autocompleteInput","current","value","createRef","state","window","google","maps","places","Autocomplete","types","addListener","resetPending","Fragment","type","ref","className","id","placeholder","onClick","Component","contextType","FormGroup","htmlFor","label","containers_AutoCompleteInput_AutoCompleteInput","Message","message","messageType","LeftPanel","myFormRef","reset","resetDone","onSubmit","handleSubmit","el","components_FormGroup_FormGroup","components_Message_Message","disabled","submitBtnLabel","handleReset","getLocationOnMap","lat","lng","LatLng","RightPanel","showDefaultPosition","directionsService","DirectionsService","directionsDisplay","DirectionsRenderer","map","Map","document","getElementById","center","zoom","mapTypeId","diaplayRoute","setMap","middlePoints","toConsumableArray","route","origin","shift","destination","pop","wayPointsRoute","middlePt","stopover","waypoints","optimizeWaypoints","travelMode","response","status","setDirections","resetMap","prevProps","showRoute","DEFAULT_APP_STATE","start","drop","URLS","submit","getRoute","API","axios","create","baseURL","AppBody","handleChange","key","defineProperty","getCords","obj","checkForUnsuccessfulMsg","data","error","setMessageInState","msg","msgType","arguments","length","undefined","makeRequestForRoute","endpoint","get","then","result","unsuccessfulMsg","_result$data","total_distance","total_time","path","catch","makeRequestForToken","post","token","replace","event","preventDefault","_this$state","JSON","parse","stringify","objectSpread","initMap","loadJS","concat","GOOGLE_MAP_API","context_LocationsContext","Provider","components_LeftPanel_LeftPanel","assign","components_RightPanel_RightPanel","AppFooter","App","components_AppHeader_AppHeader","containers_AppBody_AppBody","components_AppFooter_AppFooter","Boolean","hostname","match","ReactDOM","render","src_App_0","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8a2f64ac.chunk.js","sourcesContent":["import React from 'react';\r\nimport './AppHeader.css';\r\n\r\n/**\r\n * The application header\r\n */\r\nconst AppHeader = () => {\r\n  return <header>React Navigation App</header>;\r\n};\r\n\r\nexport default AppHeader;\r\n","import React from 'react';\r\n\r\nconst LocationsContext = React.createContext({\r\n  mapLoaded: false,\r\n  updateLocation: () => {}\r\n});\r\n\r\nexport default LocationsContext;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport LocationsContext from '../../context/LocationsContext';\r\nimport './AutoCompleteInput.css';\r\n\r\n/**\r\n * A re-usable component that returns a input field that is bound with Google maps API\r\n */\r\nclass AutoCompleteInput extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.autocompleteInput = React.createRef();\r\n    this.autocomplete = null;\r\n    this.state = {\r\n      isDirty: false\r\n    };\r\n  }\r\n\r\n  static contextType = LocationsContext;\r\n\r\n  handlePlaceChanged = () => {\r\n    const place = this.autocomplete.getPlace();\r\n    this.context.updateLocation(this.props.inputId, place.geometry.location);\r\n    this.setState({\r\n      isDirty: true\r\n    });\r\n  };\r\n\r\n  resetField = () => {\r\n    this.autocompleteInput.current.value = '';\r\n    this.context.updateLocation(this.props.inputId, '');\r\n    this.setState({\r\n      isDirty: false\r\n    });\r\n  };\r\n\r\n  componentDidUpdate() {\r\n    if (this.context.mapLoaded) {\r\n      this.autocomplete = new window.google.maps.places.Autocomplete(\r\n        this.autocompleteInput.current,\r\n        { types: ['geocode'] }\r\n      );\r\n      this.autocomplete.addListener('place_changed', this.handlePlaceChanged);\r\n    }\r\n    if (this.context.resetPending) {\r\n      this.resetField();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <input\r\n          type=\"text\"\r\n          ref={this.autocompleteInput}\r\n          className=\"form-control autocomplete-input\"\r\n          id={this.props.inputId}\r\n          placeholder=\"Enter a location\"\r\n        />\r\n        {this.state.isDirty && (\r\n          <span className=\"cross-icon\" onClick={this.resetField}>\r\n            X\r\n          </span>\r\n        )}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nAutoCompleteInput.propTypes = {\r\n  inputId: PropTypes.string\r\n};\r\n\r\nexport default AutoCompleteInput;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport AutoCompleteInput from '../../containers/AutoCompleteInput/AutoCompleteInput';\r\n\r\n/**\r\n * A re-usable comonent that returns a combination of label and an input field \r\n * collectively called form group\r\n */\r\nconst FormGroup = props => {\r\n  return (\r\n    <div className=\"form-group\">\r\n      <label htmlFor={props.inputId}>{props.label}</label>\r\n      <AutoCompleteInput\r\n        className=\"form-control\"\r\n        inputId={props.inputId}\r\n        mapLoaded={props.mapLoaded}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nFormGroup.propTypes = {\r\n  inputId: PropTypes.string,\r\n  label: PropTypes.string,\r\n  value: PropTypes.string\r\n};\r\n\r\nexport default FormGroup;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './Message.css';\r\n\r\n/**\r\n * A re-usable component that displays the message it receives with approopriate styling \r\n * based on the message type\r\n */\r\nconst Message = props => {\r\n  const { message, messageType } = props;\r\n  return message ? (\r\n    <p className={messageType === 'error' ? 'text-red' : ''}>{message}</p>\r\n  ) : null;\r\n};\r\n\r\nMessage.propTypes = {\r\n  message: PropTypes.string,\r\n  messageType: PropTypes.string\r\n};\r\n\r\nexport default Message;\r\n","import React, { Component } from 'react';\r\nimport './LeftPanel.css';\r\nimport PropTypes from 'prop-types';\r\nimport FormGroup from '../FormGroup/FormGroup';\r\nimport Message from '../Message/Message';\r\n\r\n/**\r\n * The Left panel of the application that contains the search form.\r\n */\r\nclass LeftPanel extends Component {\r\n  componentDidUpdate() {\r\n    if (this.props.resetPending) {\r\n      this.myFormRef.reset();\r\n      this.props.resetDone();\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"col-xs-12 col-md-4 left-panel\">\r\n        <form\r\n          onSubmit={this.props.handleSubmit}\r\n          ref={el => (this.myFormRef = el)}\r\n        >\r\n          <FormGroup inputId=\"start\" label=\"Starting location\" />\r\n          <FormGroup inputId=\"drop\" label=\"Drop-off point\" />\r\n          <Message\r\n            message={this.props.message}\r\n            messageType={this.props.messageType}\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary lp-btn\"\r\n            disabled={this.props.submitBtnLabel === 'Loading...'}\r\n            onClick={this.props.handleSubmit}\r\n          >\r\n            {this.props.submitBtnLabel}\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-secondary lp-btn\"\r\n            onClick={this.props.handleReset}\r\n          >\r\n            Reset\r\n          </button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nLeftPanel.propTypes = {\r\n  message: PropTypes.string,\r\n  messageType: PropTypes.string,\r\n  submitBtnLabel: PropTypes.string,\r\n  mapLoaded: PropTypes.bool,\r\n  handleSubmit: PropTypes.func,\r\n  handleReset: PropTypes.func\r\n};\r\n\r\nexport default LeftPanel;\r\n","export const getLocationOnMap = (lat, lng) => new window.google.maps.LatLng(lat, lng)","import React, { Component } from 'react';\r\nimport './RightPanel.css';\r\nimport PropTypes from 'prop-types';\r\nimport { getLocationOnMap } from '../../config/utilities';\r\n\r\n/**\r\n * The Right halve of main page that displays the map with route based on search result.\r\n */\r\nclass RightPanel extends Component {\r\n  showDefaultPosition = () => {\r\n    this.directionsService = new window.google.maps.DirectionsService();\r\n    this.directionsDisplay = new window.google.maps.DirectionsRenderer();\r\n    this.map = new window.google.maps.Map(\r\n      document.getElementById('googleMap'),\r\n      {\r\n        center: {\r\n          lat: 51.509865,\r\n          lng: -0.118092\r\n        },\r\n        zoom: 12,\r\n        mapTypeId: 'roadmap'\r\n      }\r\n    );\r\n  };\r\n\r\n  diaplayRoute = () => {\r\n    this.directionsDisplay.setMap(this.map);\r\n    const middlePoints = [...this.props.route];\r\n    const origin = middlePoints.shift();\r\n    const destination = middlePoints.pop();\r\n    const wayPointsRoute = middlePoints.map(middlePt => {\r\n      return {\r\n        location: getLocationOnMap(middlePt[0], middlePt[1]),\r\n        stopover: true\r\n      };\r\n    });\r\n    this.directionsService.route(\r\n      {\r\n        origin: getLocationOnMap(origin[0], origin[1]),\r\n        destination: getLocationOnMap(destination[0], destination[1]),\r\n        waypoints: wayPointsRoute,\r\n        optimizeWaypoints: true,\r\n        travelMode: 'DRIVING'\r\n      },\r\n      (response, status) => {\r\n        if (status === 'OK') {\r\n          this.directionsDisplay.setDirections(response);\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  resetMap = () => {\r\n    this.directionsDisplay.setMap(null);\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.mapLoaded && !prevProps.mapLoaded) {\r\n      this.showDefaultPosition();\r\n    }\r\n    if (this.props.showRoute) {\r\n      this.diaplayRoute();\r\n    } else {\r\n      this.resetMap();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"col-xs-12 col-md-8\">\r\n        <div id=\"googleMap\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nRightPanel.propTypes = {\r\n  mapLoaded: PropTypes.bool,\r\n  showRoute: PropTypes.bool,\r\n  route: PropTypes.array\r\n};\r\n\r\nexport default RightPanel;\r\n","const GOOGLE_MAP_API = 'https://maps.googleapis.com/maps/api/js?key=';\r\n\r\nexport const GOOGLE_API_URL =\r\n  GOOGLE_MAP_API + process.env.REACT_APP_GOOGLE_API_KEY;\r\n\r\nexport const DEFAULT_APP_STATE = {\r\n  start: '',\r\n  drop: '',\r\n  message: '',\r\n  messageType: '',\r\n  mapLoaded: false,\r\n  resetPending: false,\r\n  showRoute: false,\r\n  route: null,\r\n  submitBtnLabel: 'Submit'\r\n};\r\n","export const baseURL = `https://mock-api.dev.lalamove.com`;\r\n\r\nexport const URLS = {\r\n  submit: 'route',\r\n  getRoute: 'route/{token}'\r\n};\r\n","import axios from 'axios';\r\nimport { baseURL } from '../config/endpoints';\r\n\r\nconst API = axios.create({\r\n  baseURL: baseURL\r\n});\r\n\r\nexport default API;\r\n","import React, { Component } from 'react';\r\nimport './AppBody.css';\r\nimport LeftPanel from '../../components/LeftPanel/LeftPanel';\r\nimport RightPanel from '../../components/RightPanel/RightPanel';\r\nimport LocationsContext from '../../context/LocationsContext';\r\nimport { GOOGLE_API_URL, DEFAULT_APP_STATE } from '../../config/constants';\r\nimport API from '../../axios/AxiosLauncher';\r\nimport { URLS } from '../../config/endpoints';\r\n\r\n/**\r\n * The application body, internally split into 2 halves: LeftPanel and RightPanel respectively.\r\n */\r\nclass AppBody extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { ...DEFAULT_APP_STATE };\r\n  }\r\n\r\n  handleChange = (key, value) => {\r\n    this.setState({\r\n      [key]: value\r\n    });\r\n  };\r\n\r\n  getCords = obj => [obj.lat, obj.lng];\r\n\r\n  checkForUnsuccessfulMsg = response => {\r\n    switch (response.data.status) {\r\n      case 'success':\r\n        return '';\r\n      case 'failure':\r\n        return response.data.error;\r\n      default:\r\n        return response.data.status;\r\n    }\r\n  };\r\n\r\n  setMessageInState = (msg, msgType = '') => {\r\n    this.setState({\r\n      message: msg,\r\n      messageType: msgType,\r\n      submitBtnLabel: 'Re-Submit'\r\n    });\r\n  };\r\n\r\n  makeRequestForRoute = endpoint => {\r\n    API.get(endpoint)\r\n      .then(result => {\r\n        if (result.data.status === 'in progress') {\r\n          return this.makeRequestForRoute(endpoint);\r\n        }\r\n        const unsuccessfulMsg = this.checkForUnsuccessfulMsg(result);\r\n        if (unsuccessfulMsg) {\r\n          this.setMessageInState(\r\n            'Server responded with: ' + unsuccessfulMsg,\r\n            'error'\r\n          );\r\n        } else {\r\n          const { total_distance, total_time } = result.data;\r\n          this.setMessageInState(\r\n            'total distance: ' +\r\n              total_distance +\r\n              ' & ' +\r\n              'total time: ' +\r\n              total_time\r\n          );\r\n          this.setState({\r\n            submitBtnLabel: 'Submit',\r\n            showRoute: true,\r\n            route: result.data.path\r\n          });\r\n        }\r\n      })\r\n      .catch(response => {\r\n        this.setMessageInState(\r\n          'Something went wrong! Please try again in some time.',\r\n          'error'\r\n        );\r\n      });\r\n  };\r\n\r\n  makeRequestForToken = (origin, destination) => {\r\n    API.post(URLS.submit, { origin, destination })\r\n      .then(result => {\r\n        const token = result && (result.data && result.data.token);\r\n        const endpoint = URLS.getRoute.replace('{token}', token);\r\n        this.makeRequestForRoute(endpoint);\r\n      })\r\n      .catch(response => {\r\n        this.setMessageInState(\r\n          'Something went wrong! Please try again in some time.',\r\n          'error'\r\n        );\r\n      });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    this.setState({\r\n      submitBtnLabel: 'Loading...',\r\n      message: '',\r\n      messageType: '',\r\n      showRoute: false,\r\n      route: null\r\n    });\r\n    const { start, drop } = this.state;\r\n    if (start && drop) {\r\n      const origin = this.getCords(\r\n          JSON.parse(JSON.stringify(this.state.start))\r\n        ),\r\n        destination = this.getCords(\r\n          JSON.parse(JSON.stringify(this.state.drop))\r\n        );\r\n      this.makeRequestForToken(origin, destination);\r\n    } else {\r\n      this.setMessageInState(\r\n        'Both starting point and drop-off location are mandatory!',\r\n        'error'\r\n      );\r\n    }\r\n  };\r\n\r\n  resetDone = () => {\r\n    this.setState({ resetPending: false });\r\n  };\r\n\r\n  handleReset = event => {\r\n    this.setState({\r\n      ...DEFAULT_APP_STATE,\r\n      resetPending: true,\r\n      mapLoaded: true\r\n    });\r\n  };\r\n\r\n  initMap = () => {\r\n    this.setState({ mapLoaded: true });\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.initMap = this.initMap;\r\n    window.loadJS(`${GOOGLE_API_URL}&libraries=places&callback=initMap`);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"app-body-container\">\r\n        <div className=\"row\">\r\n          <LocationsContext.Provider\r\n            value={{\r\n              mapLoaded: this.state.mapLoaded,\r\n              updateLocation: this.handleChange,\r\n              resetPending: this.state.resetPending\r\n            }}\r\n          >\r\n            <LeftPanel\r\n              handleSubmit={this.handleSubmit}\r\n              handleReset={this.handleReset}\r\n              resetDone={this.resetDone}\r\n              {...this.state}\r\n            />\r\n          </LocationsContext.Provider>\r\n          <RightPanel\r\n            mapLoaded={this.state.mapLoaded}\r\n            showRoute={this.state.showRoute}\r\n            resetPending={this.state.resetPending}\r\n            route={this.state.route}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AppBody;\r\n","import React from 'react';\r\nimport './AppFooter.css';\r\n\r\n/**\r\n * The application footer\r\n */\r\nconst AppFooter = () => {\r\n  return <footer>Designed and Coded by Vishal Gulati - &copy; 2019</footer>;\r\n};\r\n\r\nexport default AppFooter;\r\n","import React from 'react';\nimport './App.css';\nimport AppHeader from './components/AppHeader/AppHeader';\nimport AppBody from './containers/AppBody/AppBody';\nimport AppFooter from './components/AppFooter/AppFooter';\n\n/**\n * The container component that wraps around whole application. It imports header, body and footer\n * of the application and includes them in the DOM.\n */\nconst App = () => {\n  return (\n    <div className=\"App\">\n      <AppHeader />\n      <AppBody />\n      <AppFooter />\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}